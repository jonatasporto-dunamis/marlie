# =============================================================================
# REQUIRED ENVIRONMENT VARIABLES
# =============================================================================

# Database Configuration (REQUIRED)
# PostgreSQL URL - Format: postgres://USER:PASSWORD@HOST:PORT/DBNAME
DATABASE_URL=postgres://user:password@localhost:5432/syncbelle

# Redis Configuration (REQUIRED)
# Format: redis://default:PASSWORD@HOST:PORT
REDIS_URL=redis://localhost:6379

# Evolution WhatsApp API (REQUIRED)
EVOLUTION_BASE_URL=https://your-evolution-api.com
EVOLUTION_API_KEY=your_evolution_api_key
EVOLUTION_INSTANCE=your_instance_name

# =============================================================================
# OPTIONAL ENVIRONMENT VARIABLES
# =============================================================================

# Server Configuration
PORT=3000
NODE_ENV=production
SERVER_URL=https://your-app.railway.app

# Authentication & Security
ADMIN_TOKEN=your_secure_admin_token_here
EVOLUTION_WEBHOOK_TOKEN=your_secure_webhook_token_here
JWT_SECRET=your_jwt_secret_key

# Trinks Integration
TRINKS_BASE_URL=https://api.trinks.com
TRINKS_API_KEY=your_trinks_api_key
TRINKS_ESTABELECIMENTO_ID=your_establishment_id

# OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-4o-mini

# Database principal
DATABASE_URL=
# DATABASE_SSL: 'true' para SSL, 'no-verify' para ignorar verificação de certificado, vazio/false para sem SSL
DATABASE_SSL=

# Database legado (opcional)
LEGACY_DATABASE_URL=
# LEGACY_DATABASE_SSL: 'true' para SSL, 'no-verify' para ignorar verificação, vazio/false para sem SSL
LEGACY_DATABASE_SSL=

# Redis (opcional)
REDIS_URL=

# Admin/Auth
ADMIN_USER=
ADMIN_PASS=
JWT_SECRET=your_jwt_secret_key

# Logging Configuration
LOG_LEVEL=ERROR,WARN,DEBUG,INFO,LOG,VERBOSE,DARK,WEBHOOKS
LOG_COLOR=true
LOG_BAILEYS=error

# Database Configuration
# PostgreSQL URL (required)
# Format: postgres://USER:PASSWORD@HOST:PORT/DBNAME
DATABASE_URL=postgres://user:password@localhost:5432/syncbelle

# Redis Configuration (optional - for caching)
# Format: redis://default:PASSWORD@HOST:PORT
REDIS_URL=redis://localhost:6379
CACHE_REDIS_ENABLED=false
CACHE_REDIS_PREFIX_KEY=syncbelle
CACHE_REDIS_TTL=604800
CACHE_LOCAL_ENABLED=true
CACHE_LOCAL_TTL=604800

# Database SSL Configuration
# Set to 'true' for SSL (common in cloud providers), 'no-verify' to skip cert verification, or leave empty/false for no SSL
DATABASE_SSL=true

# Storage Configuration (Evolution API)
# Temporary storage settings
STORE_MESSAGES=true
STORE_MESSAGE_UP=true
STORE_CONTACTS=true
STORE_CHATS=true

# Persistent storage settings
DATABASE_ENABLED=true
DATABASE_SAVE_DATA_INSTANCE=true
DATABASE_SAVE_DATA_NEW_MESSAGE=true
DATABASE_SAVE_MESSAGE_UPDATE=true
DATABASE_SAVE_DATA_CONTACTS=true
DATABASE_SAVE_DATA_CHATS=true

# Cleanup settings
CLEAN_STORE_CLEANING_INTERVAL=3600
CLEAN_STORE_MESSAGES=false
CLEAN_STORE_MESSAGE_UP=false
CLEAN_STORE_CONTACTS=false
CLEAN_STORE_CHATS=false

# Legacy Database Fallback
# Set to 'false' to disable the legacy database fallback and suppress permission errors in logs.
# LEGACY_FALLBACK_ENABLED=true

# =============================================================================
# FEATURE FLAGS & BUSINESS LOGIC
# =============================================================================

# Upsell System
UPSELL_ENABLED=on
UPSELL_MAX_PER_CONVERSATION=1
UPSELL_TIMEOUT_MS=300000

# Automated Messaging System
REMINDER_ENABLED=on
PRE_VISIT_ENABLED=true
PRE_VISIT_WINDOW_HOURS=24
PRE_VISIT_WINDOW_MAX_HOURS=40

# No-Show Shield
NO_SHOW_SHIELD_ENABLED=on
NO_SHOW_CHECK_HOUR=18
NO_SHOW_CHECK_DAYS_BEFORE=1

# Message Scheduler Worker
SCHEDULER_ENABLED=true
WORKER_POLL_INTERVAL_MS=5000
WORKER_BATCH_SIZE=50
SCHEDULER_MAX_RETRIES=3
SCHEDULER_RETRY_BACKOFF_MS=300000

# Opt-out System
OPT_OUT_ENABLED=true
OPT_OUT_KEYWORDS=PARAR,STOP,SAIR,CANCELAR
OPT_IN_KEYWORDS=VOLTAR,ATIVAR,SIM,QUERO

# =============================================================================
# PRIVACY & SECURITY
# =============================================================================

# PII Protection
MASK_PII_IN_LOGS=true
LOG_RETENTION_DAYS=30

# Rate Limiting
WEBHOOK_RATE_LIMIT_PER_MINUTE=300
ADMIN_RATE_LIMIT_PER_MINUTE=100

# Webhook Security
WEBHOOK_DEDUPE_WINDOW_MS=300000
WEBHOOK_DEDUPE_MAX_CACHE_SIZE=10000

# =============================================================================
# PERFORMANCE & MONITORING
# =============================================================================

# Performance Testing
PERF_TARGET_JOBS_PER_MINUTE=60
PERF_MAX_LATENCY_MS=100
PERF_CONCURRENT_CONVERSATIONS=10