# =============================================================================
# CONFIGURAÇÃO DO MÓDULO MARLIE-CATALOG
# =============================================================================
# Este arquivo contém todas as variáveis de ambiente necessárias para o
# módulo de sincronização e normalização do catálogo Trinks.

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES GERAIS DO MÓDULO
# -----------------------------------------------------------------------------

# Habilita o módulo de catálogo
CATALOG_MODULE_ENABLED=true

# Nível de log específico para o catálogo (debug, info, warn, error)
CATALOG_LOG_LEVEL=info

# Prefixo para chaves Redis do catálogo
CATALOG_REDIS_PREFIX=marlie:catalog

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DA API TRINKS
# -----------------------------------------------------------------------------

# URL base da API Trinks para catálogo
TRINKS_CATALOG_API_URL=https://api.trinks.com.br

# Token de autenticação da API Trinks
TRINKS_CATALOG_API_TOKEN=your_trinks_api_token_here

# Timeout para requisições à API Trinks (em ms)
TRINKS_API_TIMEOUT=30000

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE SINCRONIZAÇÃO
# -----------------------------------------------------------------------------

# Watermark inicial para sincronização (ISO 8601)
CATALOG_WATERMARK=1970-01-01T00:00:00Z

# Habilita scheduler automático de sincronização
CATALOG_SCHEDULER_ENABLED=true

# Cron para sincronização incremental (padrão: a cada 1h no minuto 15)
CATALOG_SYNC_CRON=15 */1 * * *

# Cron para snapshot diário (padrão: diariamente às 2h)
CATALOG_SNAPSHOT_CRON=0 2 * * *

# Cron para limpeza semanal (padrão: domingo às 3h)
CATALOG_CLEANUP_CRON=0 3 * * 0

# Executa backfill completo na inicialização
CATALOG_BACKFILL_ON_BOOT=false

# Tamanho da página para sincronização incremental
CATALOG_SYNC_PAGE_SIZE=100

# Timeout para lock de sincronização (em segundos)
CATALOG_SYNC_LOCK_TTL=3600

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE NORMALIZAÇÃO
# -----------------------------------------------------------------------------

# Habilita normalização automática de nomes
CATALOG_NORMALIZE_ENABLED=true

# Configurações de mapeamento de sinônimos (JSON)
CATALOG_SYNONYMS_MAP='{"progressiva":"escova progressiva","luzes":"mechas/luzes","pé e mão":"mão e pé"}'

# Símbolos a serem removidos durante normalização
CATALOG_STRIP_SYMBOLS='["/", "-", "_", "•"]'

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE BUSCA E POPULARIDADE
# -----------------------------------------------------------------------------

# Número padrão de resultados para busca top-N
CATALOG_DEFAULT_TOP_N=3

# Período em dias para cálculo de popularidade
CATALOG_POPULARITY_DAYS=30

# Limite máximo de resultados de busca
CATALOG_MAX_SEARCH_RESULTS=50

# Threshold de similaridade para busca textual (0.0 a 1.0)
CATALOG_SIMILARITY_THRESHOLD=0.3

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE RELATÓRIOS E DIFF
# -----------------------------------------------------------------------------

# Habilita geração automática de relatórios diários
CATALOG_AUTO_REPORTS=true

# Dias de retenção para snapshots
CATALOG_SNAPSHOT_RETENTION_DAYS=30

# Dias de retenção para logs de sincronização
CATALOG_SYNC_LOGS_RETENTION_DAYS=90

# Habilita alertas para discrepâncias críticas
CATALOG_ALERTS_ENABLED=true

# Threshold para alertas de discrepância (porcentagem)
CATALOG_DISCREPANCY_ALERT_THRESHOLD=10

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE PERFORMANCE
# -----------------------------------------------------------------------------

# Habilita cache Redis para consultas frequentes
CATALOG_CACHE_ENABLED=true

# TTL do cache em segundos (padrão: 1 hora)
CATALOG_CACHE_TTL=3600

# Tamanho máximo do batch para operações em lote
CATALOG_BATCH_SIZE=1000

# Timeout para operações de banco (em ms)
CATALOG_DB_TIMEOUT=30000

# Número máximo de conexões simultâneas com a API Trinks
CATALOG_MAX_CONCURRENT_REQUESTS=5

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE MONITORAMENTO
# -----------------------------------------------------------------------------

# Habilita métricas detalhadas
CATALOG_METRICS_ENABLED=true

# Intervalo para coleta de métricas (em segundos)
CATALOG_METRICS_INTERVAL=300

# Habilita health checks automáticos
CATALOG_HEALTH_CHECKS_ENABLED=true

# Intervalo para health checks (em segundos)
CATALOG_HEALTH_CHECK_INTERVAL=60

# URL para webhook de alertas (opcional)
CATALOG_WEBHOOK_ALERTS_URL=

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE SEGURANÇA
# -----------------------------------------------------------------------------

# Token para endpoints administrativos do catálogo
CATALOG_ADMIN_TOKEN=your_secure_admin_token_here

# Habilita mascaramento de dados sensíveis nos logs
CATALOG_PII_MASKING=true

# Lista de IPs permitidos para endpoints admin (separados por vírgula)
CATALOG_ADMIN_ALLOWED_IPS=127.0.0.1,::1

# Habilita rate limiting para endpoints públicos
CATALOG_RATE_LIMITING_ENABLED=true

# Limite de requisições por minuto por IP
CATALOG_RATE_LIMIT_PER_MINUTE=60

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE DESENVOLVIMENTO
# -----------------------------------------------------------------------------

# Habilita modo debug (logs mais verbosos)
CATALOG_DEBUG_MODE=false

# Habilita simulação de API (para testes)
CATALOG_MOCK_API=false

# Arquivo de dados mock (quando CATALOG_MOCK_API=true)
CATALOG_MOCK_DATA_FILE=./test/fixtures/catalog-mock-data.json

# Habilita validação rigorosa de dados
CATALOG_STRICT_VALIDATION=true

# Força recriação de índices na inicialização
CATALOG_FORCE_REINDEX=false

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE INTEGRAÇÃO
# -----------------------------------------------------------------------------

# Habilita integração com sistema de agendamentos
CATALOG_SCHEDULING_INTEGRATION=true

# Habilita integração com sistema de métricas
CATALOG_METRICS_INTEGRATION=true

# Habilita integração com sistema de notificações
CATALOG_NOTIFICATIONS_INTEGRATION=false

# URL do webhook para notificações de sincronização
CATALOG_SYNC_WEBHOOK_URL=

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE TIMEZONE
# -----------------------------------------------------------------------------

# Timezone para operações de sincronização
TZ=America/Sao_Paulo

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE BANCO DE DADOS (se diferentes do principal)
# -----------------------------------------------------------------------------

# URL de conexão específica para o catálogo (opcional)
# CATALOG_DATABASE_URL=postgresql://user:password@localhost:5432/marlie_catalog

# Pool de conexões específico para catálogo
# CATALOG_DB_POOL_MIN=2
# CATALOG_DB_POOL_MAX=10

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE REDIS (se diferentes do principal)
# -----------------------------------------------------------------------------

# URL Redis específica para catálogo (opcional)
# CATALOG_REDIS_URL=redis://localhost:6379/2

# Prefixo específico para chaves do catálogo
# CATALOG_REDIS_KEY_PREFIX=catalog:

# -----------------------------------------------------------------------------
# EXEMPLOS DE USO
# -----------------------------------------------------------------------------

# Para ambiente de desenvolvimento:
# CATALOG_MODULE_ENABLED=true
# CATALOG_DEBUG_MODE=true
# CATALOG_MOCK_API=true
# CATALOG_BACKFILL_ON_BOOT=false

# Para ambiente de produção:
# CATALOG_MODULE_ENABLED=true
# CATALOG_DEBUG_MODE=false
# CATALOG_MOCK_API=false
# CATALOG_BACKFILL_ON_BOOT=true
# CATALOG_SCHEDULER_ENABLED=true
# CATALOG_ALERTS_ENABLED=true

# Para ambiente de teste:
# CATALOG_MODULE_ENABLED=false
# CATALOG_MOCK_API=true
# CATALOG_SCHEDULER_ENABLED=false